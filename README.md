# üì∞ Analyseur de Sentiment d'Actualit√©s Multilingue

> **Pipeline d'analyse de sentiment automatis√© pour articles d'actualit√© en plusieurs langues**

Ce projet impl√©mente un pipeline complet d'analyse de sentiment pour des articles d'actualit√© r√©cup√©r√©s via l'API NewsAPI. Il permet de collecter, analyser et interpr√©ter le sentiment de titres d'articles dans diff√©rentes langues avec traduction automatique vers le fran√ßais.

## üéØ Objectifs du Projet

- **Collecte automatis√©e** d'actualit√©s via l'API NewsAPI
- **Analyse de sentiment** multilingue avec des mod√®les de NLP pr√©-entra√Æn√©s
- **Traduction automatique** vers le fran√ßais pour une analyse unifi√©e
- **G√©n√©ration de rapports** d√©taill√©s avec statistiques et recommandations

## üìã Table des Mati√®res

1. [Architecture du Projet](#-architecture-du-projet)
2. [Installation](#-installation)
3. [Configuration](#-configuration)
4. [Guide d'Utilisation](#-guide-dutilisation)
5. [Modules D√©taill√©s](#-modules-d√©taill√©s)
6. [Format des Donn√©es](#-format-des-donn√©es)
7. [Exemples de R√©sultats](#-exemples-de-r√©sultats)
8. [Limitations et Biais](#-limitations-et-biais)
9. [Contribuer](#-contribuer)

## üèóÔ∏è Architecture du Projet

Le projet est organis√© en 4 modules s√©quentiels qui forment un pipeline de traitement :

```
üì¶ News_api/
‚îú‚îÄ‚îÄ 1_search_tools.py          # üîç Collecte d'actualit√©s
‚îú‚îÄ‚îÄ 2_analyse_sentiments.py    # üé≠ Analyse de sentiment
‚îú‚îÄ‚îÄ 3_traduction.py            # üåç Traduction automatique
‚îú‚îÄ‚îÄ 4_analyse_fichier.py       # üìä G√©n√©ration de rapports
‚îú‚îÄ‚îÄ resultats_news_*.txt       # üìÑ Articles par langue
‚îú‚îÄ‚îÄ corpus_concatene.txt       # üìÑ Tous les titres
‚îú‚îÄ‚îÄ resultats_sentiments_corpus.json         # üìÑ R√©sultats d'analyse
‚îú‚îÄ‚îÄ resultats_sentiments_corpus_traduit.json # üìÑ Avec traductions
‚îî‚îÄ‚îÄ README.md                  # üìñ Documentation
```

### Flux de Donn√©es

```mermaid
graph LR
    A[NewsAPI] --> B[1_search_tools.py]
    B --> C[resultats_news_*.txt]
    C --> D[2_analyse_sentiments.py]
    D --> E[resultats_sentiments_corpus.json]
    E --> F[3_traduction.py]
    F --> G[resultats_sentiments_corpus_traduit.json]
    G --> H[4_analyse_fichier.py]
    H --> I[Rapport d'Analyse]
```

## üöÄ Installation

### Pr√©requis

- **Python 3.8+**
- **Cl√© API NewsAPI** (gratuite sur [newsapi.org](https://newsapi.org))

### Installation des D√©pendances

```bash
# Clonage du projet
git clone <url-du-projet>
cd News_api

# Installation des d√©pendances Python
pip install -r requirements.txt

# Si requirements.txt n'existe pas, installer manuellement :
pip install requests python-dotenv transformers torch tqdm
```

### D√©pendances Principales

| Package | Version | Usage |
|---------|---------|-------|
| `requests` | >= 2.25.0 | Requ√™tes HTTP vers NewsAPI |
| `python-dotenv` | >= 0.19.0 | Gestion des variables d'environnement |
| `transformers` | >= 4.20.0 | Mod√®les de NLP (sentiment + traduction) |
| `torch` | >= 1.12.0 | Framework d'inf√©rence PyTorch |
| `tqdm` | >= 4.60.0 | Barres de progression |

## ‚öôÔ∏è Configuration

### 1. Configuration de l'API NewsAPI

Cr√©ez un fichier `.env` √† la racine du projet :

```bash
# .env
NEWSAPI_KEY=votre_cle_api_newsapi_ici
```

Pour obtenir une cl√© API :
1. Visitez [newsapi.org](https://newsapi.org)
2. Cr√©ez un compte gratuit
3. Copiez votre cl√© API dans le fichier `.env`

### 2. Configuration des Langues (Optionnel)

Par d√©faut, le syst√®me supporte 13 langues. Pour ajouter d'autres langues, modifiez le dictionnaire `lang2model` dans `3_traduction.py` :

```python
lang2model = {
    'votre_langue': 'Helsinki-NLP/opus-mt-votre_langue-fr',
    # ...
}
```

## üìñ Guide d'Utilisation

### Ex√©cution Compl√®te du Pipeline

```bash
# 1. Collecte d'actualit√©s (exemple avec "intelligence artificielle")
python 1_search_tools.py "intelligence artificielle" --from-date 2025-07-01 --max-results 10

# 2. Analyse de sentiment (traite tous les fichiers resultats_news_*.txt)
python 2_analyse_sentiments.py

# 3. Traduction automatique vers le fran√ßais
python 3_traduction.py

# 4. G√©n√©ration du rapport d'analyse
python 4_analyse_fichier.py resultats_sentiments_corpus_traduit.json
```

### Options Avanc√©es de Recherche

```bash
# Recherche avec param√®tres personnalis√©s
python 1_search_tools.py "machine learning" \
    --from-date 2025-06-01 \
    --sort popularity \
    --max-results 20

# Param√®tres disponibles :
# --from-date : Date de d√©but (YYYY-MM-DD)
# --sort : relevancy | popularity | publishedAt
# --max-results : Nombre d'articles (1-100)
```

### Analyse de Fichiers Sp√©cifiques

```bash
# Analyse d'un fichier de r√©sultats sp√©cifique
python 4_analyse_fichier.py resultats_sentiments_corpus.json
```

## üìö Modules D√©taill√©s

### üîç Module 1: Collecte d'Actualit√©s (`1_search_tools.py`)

**R√¥le** : R√©cup√©ration d'articles via l'API NewsAPI

**Fonctionnalit√©s** :
- Recherche par mots-cl√©s avec filtres temporels
- Support de diff√©rentes langues et crit√®res de tri
- Formatage structur√© des r√©sultats (titre, source, date, description, URL)
- Sauvegarde automatique en fichiers texte

**Configuration dans le code** :
```python
# Langue actuellement fix√©e en chinois (zh)
# Pour changer : modifier la ligne dans format_news_context()
f'language=fr&'  # Exemple pour le fran√ßais
```

**Formats de sortie** :
- `resultats_news.txt` : Articles format√©s
- Structure : `- Titre (Source, Date) ‚Äî Description\n  URL`

### üé≠ Module 2: Analyse de Sentiment (`2_analyse_sentiments.py`)

**R√¥le** : Classification automatique du sentiment des titres

**Mod√®le utilis√©** :
- `cardiffnlp/twitter-xlm-roberta-base-sentiment`
- Mod√®le multilingue pr√©-entra√Æn√© sur Twitter
- Classifications : positif, neutre, n√©gatif

**Processus** :
1. Scan automatique des fichiers `resultats_news_*.txt`
2. Extraction des codes de langue depuis les noms de fichiers
3. Analyse de sentiment avec scores de confiance
4. G√©n√©ration de statistiques globales

**Sortie** :
- `corpus_concatene.txt` : Tous les titres extraits
- `resultats_sentiments_corpus.json` : R√©sultats d√©taill√©s

### üåç Module 3: Traduction Automatique (`3_traduction.py`)

**R√¥le** : Traduction des titres non-fran√ßais vers le fran√ßais

**Mod√®les utilis√©s** :
- S√©rie `Helsinki-NLP/opus-mt-*-fr` (MarianMT)
- Support de 12 langues : en, de, es, it, nl, pt, ru, zh, ar, he, no, sv

**Optimisations** :
- Chargement paresseux des mod√®les (une fois par langue)
- Cache des mod√®les en m√©moire
- Gestion d'erreurs robuste

**Sortie** :
- `resultats_sentiments_corpus_traduit.json` : Donn√©es enrichies avec traductions

### üìä Module 4: Analyse et Rapports (`4_analyse_fichier.py`)

**R√¥le** : G√©n√©ration de rapports d√©taill√©s et recommandations

**Sections du rapport** :
1. **Statistiques g√©n√©rales** : R√©partition des sentiments avec pourcentages
2. **Analyse de tendance** : Sentiment dominant et interpr√©tation
3. **Exemples repr√©sentatifs** : Meilleurs exemples par sentiment (score le plus √©lev√©)
4. **Analyse qualitative** : Recommandations d'interpr√©tation et limitations

**Fonctionnalit√©s avanc√©es** :
- Tri des exemples par score de confiance
- Recommandations contextuelles bas√©es sur la r√©partition
- Alertes sur les biais m√©thodologiques

## üìÑ Format des Donn√©es

### Structure des Fichiers JSON

#### `resultats_sentiments_corpus.json`
```json
[
  {
    "langue": "fr",
    "titre": "L'IA r√©volutionne l'industrie pharmaceutique",
    "sentiment": "positif", 
    "score": 0.8945
  }
]
```

#### `resultats_sentiments_corpus_traduit.json`
```json
[
  {
    "langue": "en",
    "titre": "AI transforms healthcare industry",
    "sentiment": "positif",
    "score": 0.8234,
    "traduction": "L'IA transforme l'industrie de la sant√©"
  }
]
```

### Codes de Langues Support√©s

| Code | Langue | Mod√®le de Traduction |
|------|--------|---------------------|
| `fr` | Fran√ßais | (pas de traduction) |
| `en` | Anglais | opus-mt-en-fr |
| `de` | Allemand | opus-mt-de-fr |
| `es` | Espagnol | opus-mt-es-fr |
| `it` | Italien | opus-mt-it-fr |
| `nl` | N√©erlandais | opus-mt-nl-fr |
| `pt` | Portugais | opus-mt-pt-fr |
| `ru` | Russe | opus-mt-ru-fr |
| `zh` | Chinois | opus-mt-zh-fr |
| `ar` | Arabe | opus-mt-ar-fr |
| `he` | H√©breu | opus-mt-he-fr |
| `no` | Norv√©gien | opus-mt-no-fr |
| `sv` | Su√©dois | opus-mt-sv-fr |

## üìà Exemples de R√©sultats

### Rapport d'Analyse Type

```
============================================================
RAPPORT D'ANALYSE DE SENTIMENT
============================================================
Fichier analys√©: resultats_sentiments_corpus_traduit.json
Nombre total de titres analys√©s: 150

R√©partition des sentiments:
    Positif :   65 articles ( 43.3%)
    Neutre  :   52 articles ( 34.7%)
    N√©gatif :   33 articles ( 22.0%)

========================================
ANALYSE DE TENDANCE  
========================================
Sentiment dominant: 'positif' (43.3% des articles)
‚Üí Tendance MOD√âR√âE vers le sentiment positif

========================================
EXEMPLES REPR√âSENTATIFS
========================================

--- SENTIMENT POSITIF ---
Titre original: Revolutionary AI breakthrough in medical diagnosis
Score de confiance: 0.924
Traduction FR: Perc√©e r√©volutionnaire de l'IA dans le diagnostic m√©dical
Langue source: en

--- SENTIMENT N√âGATIF ---
Titre original: AI threatens millions of jobs, experts warn
Score de confiance: 0.887
Traduction FR: L'IA menace des millions d'emplois, avertissent les experts
Langue source: en

========================================
ANALYSE QUALITATIVE
========================================

Recommandations d'interpr√©tation:
‚Üí Couverture m√©diatique √âQUILIBR√âE
  Approche nuanc√©e du sujet, aspects positifs et n√©gatifs

Limitations √† consid√©rer:
‚Ä¢ Biais possible selon la nature du corpus (sources, p√©riode, g√©ographie)
‚Ä¢ Mod√®le d'IA: classifications automatiques √† v√©rifier manuellement
‚Ä¢ Titres 'clickbait' peuvent fausser l'analyse de sentiment
‚Ä¢ Diff√©rences culturelles dans l'expression des sentiments
```

## ‚ö†Ô∏è Limitations et Biais

### Limitations Techniques

1. **Qualit√© de la traduction** : Les mod√®les Helsinki-NLP peuvent avoir des erreurs sur des textes techniques ou des expressions idiomatiques
2. **Classification de sentiment** : Le mod√®le est entra√Æn√© sur Twitter, peut ne pas capturer toutes les nuances journalistiques
3. **Langue fixe dans la collecte** : Actuellement configur√© pour le chinois dans `1_search_tools.py`

### Biais M√©thodologiques

1. **Biais de source** : NewsAPI privil√©gie certaines sources selon la r√©gion
2. **Biais temporel** : L'analyse refl√®te l'actualit√© d'une p√©riode donn√©e
3. **Biais linguistique** : Diff√©rences culturelles dans l'expression des sentiments
4. **Biais algorithmique** : Les mod√®les peuvent avoir des pr√©jug√©s int√©gr√©s

### Recommandations d'Usage

- ‚úÖ **Analyser les tendances g√©n√©rales** plut√¥t que des articles individuels
- ‚úÖ **Comparer plusieurs p√©riodes** pour identifier des √©volutions
- ‚úÖ **V√©rifier manuellement** les classifications sur des √©chantillons
- ‚ùå **Ne pas utiliser** pour des d√©cisions critiques sans validation humaine

## üîß Personnalisation

### Ajout de Nouvelles Langues

1. V√©rifiez la disponibilit√© d'un mod√®le Helsinki-NLP : `opus-mt-{langue}-fr`
2. Ajoutez l'entr√©e dans `lang2model` dans `3_traduction.py`
3. Testez avec quelques exemples

### Modification des Mod√®les

#### Changement du Mod√®le de Sentiment
```python
# Dans 2_analyse_sentiments.py
MODEL = "nouveau_modele_sentiment"  # Ex: "nlptown/bert-base-multilingual-uncased-sentiment"
id2label = {0: "n√©gatif", 1: "positif"}  # Adapter selon le mod√®le
```

#### Utilisation d'Autres APIs d'Actualit√©s
```python
# Dans 1_search_tools.py - remplacer la fonction format_news_context()
def format_news_context_custom(query, **params):
    # Impl√©mentation pour autre API (ex: Guardian, NY Times)
    pass
```

## üêõ D√©pannage

### Probl√®mes Fr√©quents

#### Erreur "NEWSAPI_KEY manquante"
```bash
# Solution : V√©rifiez votre fichier .env
echo "NEWSAPI_KEY=votre_cle_ici" > .env
```

#### Erreur de t√©l√©chargement de mod√®les
```bash
# Les mod√®les Transformers sont volumineux (500MB-2GB chacun)
# Assurez-vous d'avoir suffisamment d'espace disque et une connexion stable
```

#### Performances lentes
```python
# R√©duisez le nombre d'articles ou utilisez un GPU
python 1_search_tools.py "query" --max-results 5  # Au lieu de 50
```

### Messages d'Erreur et Solutions

| Erreur | Cause | Solution |
|--------|-------|----------|
| `ModuleNotFoundError: transformers` | D√©pendance manquante | `pip install transformers torch` |
| `HTTP 401 NewsAPI` | Cl√© API invalide | V√©rifier la cl√© dans `.env` |
| `No such file: resultats_news*.txt` | Pas de fichiers d'entr√©e | Ex√©cuter d'abord `1_search_tools.py` |
| `CUDA out of memory` | Mod√®le trop grand pour GPU | Forcer l'usage CPU : `export CUDA_VISIBLE_DEVICES=""` |

## ü§ù Contribuer

### Structure de Contribution

1. **Fork** le projet
2. **Cr√©ez** une branche pour votre fonctionnalit√© (`git checkout -b feature/nouvelle-fonctionnalite`)
3. **Committez** vos changements (`git commit -am 'Ajout nouvelle fonctionnalit√©'`)
4. **Pushez** vers la branche (`git push origin feature/nouvelle-fonctionnalite`)
5. **Cr√©ez** une Pull Request

### Am√©liorations Bienvenues

- üåê **Support de nouvelles langues** et APIs d'actualit√©s
- üìä **Visualisations** avec matplotlib/plotly
- üîç **Analyse plus fine** par source, r√©gion, ou cat√©gorie
- ‚ö° **Optimisations de performance** (parall√©lisation, cache)
- üß™ **Tests unitaires** et int√©gration continue
- üì± **Interface web** avec Flask/FastAPI

### Standards de Code

- **Documentation** : Docstrings Python d√©taill√©es
- **Style** : Respect de PEP 8
- **Tests** : Coverage minimale de 80%
- **S√©curit√©** : Pas de cl√©s API dans le code

## üìù Licence

Ce projet est sous licence MIT. Voir le fichier `LICENSE` pour plus de d√©tails.

## üÜò Support

- **Issues GitHub** : Pour les bugs et demandes de fonctionnalit√©s
- **Discussions** : Pour les questions g√©n√©rales et l'aide √† l'usage
- **Documentation** : Ce README et les commentaires dans le code

---

**Version** : 1.0.0  
**Derni√®re mise √† jour** : Juillet 2025  
**Auteur** : [Votre nom]  
**Statut** : Production Ready ‚úÖ
